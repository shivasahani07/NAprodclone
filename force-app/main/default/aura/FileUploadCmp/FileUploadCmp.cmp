<aura:component controller="FileUploadController" implements="force:lightningQuickActionWithoutHeader,flexipage:availableForRecordHome,force:hasRecordId,lightning:isUrlAddressable" access="global">
    
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    
    
    <aura:html tag="style">
        .slds-p-aroundâ€“medium {
        padding: 0rem !important;
        }
        .slds-modal__content{
        overflow-x:hidden !important;
        height:unset !important;
        max-height:unset !important;
        }
        .cuf-content {
        padding: 0 0rem !important;
        }
    </aura:html>
    
    <ltng:require styles="{!$Resource.popupCSS}" />
    
    <aura:attribute name="files" type="ContentDocument[]"/>  
    <aura:attribute name="recordId" type="string"/> 
    <aura:attribute name="TaskReviewerType" type="string"/>
    <aura:attribute name="TaskId" type="String" />
    <aura:attribute name="EnableButton" type="boolean" default="true"/>
    <aura:attribute name="ShowReviewerCmp" type="boolean" default="false"/>
    <aura:attribute name="accept" type="List" default="['.jpg', '.jpeg','.pdf','.csv','.xlsx','.doc','.docx']"/>  
    <aura:attribute name="multiple" type="Boolean" default="true"/>  
    <aura:attribute name="disabled" type="Boolean" default="false"/>
    <aura:attribute name="ShowCommentBox" type="Boolean" default="false"/>
    <aura:attribute name="ShowButtons" type="Boolean" default="true"/>
    <aura:attribute name="CommentValue" type="String" />
    <aura:attribute name="TaskStatus" type="String" />
    
    <aura:attribute name="ErrorMessageInMarkCompleteed" type="Boolean" default="false"/>
    
    <aura:attribute name="TaskObject" type="SObject" />
    <aura:attribute name="UserRec" type="SObject" />
    <aura:attribute name="LoginUserId" type="String" />
    <aura:attribute name="TaskOwnerId" type="String" />
    <aura:attribute name="Comment" type="String" />
    <aura:attribute name="RejectButton" type="Boolean" default="false"/>
    <aura:attribute name="ReAssign" type="Boolean" default="false"/>
    <aura:attribute name="Approve" type="Boolean" default="false"/>
    
    <aura:attribute name="CurrentUserEdit" type="Boolean" />
    
    <aura:attribute name="ModalPopUp" type="Boolean" default="true"/>
    
    <aura:attribute name="picklistValues" type="String[]"/>
    <aura:attribute name="mapPicklistValues" type="Map"/>
    <aura:attribute name="selectedValue" type="String"/>
    <!--For Reviewer Component-->
    <aura:attribute name="SelectedWhatId" type="String" />
    <aura:attribute name="SelectedReviewerId" type="String" />
    <aura:attribute name="ReviewerList" type="List" />
    
    <aura:attribute name="fileDescription" type="String" />
    <aura:attribute name="FileName" type="String" />
    
    <aura:attribute name="QueueList" type="String[]"/>
    
    <aura:attribute name="NavigateToOpportunity" type="Boolean" default="false"/>
    
    <aura:attribute name = "SelectedTeamMembers" type="List"/>
    <aura:attribute name = "AllTeamMembers" type="List"/>
    
    <aura:attribute name="IsEmptyParentTaskId" type="Boolean" default="false"/>
    <aura:attribute name="ButtonLabel" type="string" default="label"/>
    <aura:attribute name="ButtonDisablevalue" type="Boolean" default="false"/>
    <aura:attribute name="ChildTaskList" type="List" />
    <aura:attribute name="ChildTaskOwnerName" type="List" />
    
    <aura:attribute name="IsParentTaskId" type="Boolean" default="false"/>
    <aura:attribute name="currentTaskId" type="Id" default=""/>
    <aura:Attribute name="selectedTaskId" type="list"/>
    
    <aura:attribute name="data" type="List" default="[]" />
    <aura:attribute name="types" type="List" default="['None','Queue', 'Self']" />
    <aura:Attribute name="finalUserIds" type="list"/>
    
    <aura:Attribute name="IsTaskReviewerNameExist" type="Boolean"/>
    <aura:Attribute name="RelatedId" type="String"/>
    
    <aura:Attribute name="UserQueueList" type="List"/>
    
    <aura:Attribute name="SelectedUserIdList" type="List"/>
    <aura:Attribute name="SelectedQueueIdList" type="List"/>
    
    <aura:Attribute name="HandleResubmittedDisable" type="Boolean" default="false"/>
    <aura:attribute name="PADID" type="String" default=""/>
    
    <aura:Attribute name="AllUserList" type="List"/>
    <aura:Attribute name="AllQueueList" type="List"/>
    
    
    <aura:attribute name="activeSections" type="List" default="['A','B','C','D','E']" />
    <!-- lightning:card -->
    <div class="modal-header slds-modal__header slds-size_1-of-1" style="background-color:#65DFF6;">
        <h4 class="title slds-text-heading--medium" style="font-size:25px;color:white;">Task Management</h4>
    </div>
    <div class="slds-modal__content slds-p-around--x-small  slds-size_1-of-1 slds-is-relative slds-scrollable">
        <div class="slds-grid slds-wrap">
            <div class="slds-col slds-size_8-of-12">
                <lightning:accordion allowMultipleSectionsOpen="true" activeSectionName="{!v.activeSections}">
                    <!--Task Disposition-->
                     <!--aura:if isTrue="{!AND(v.IsParentTaskId==true,v.IsTaskReviewerNameExist==true)}"> 
                        <lightning:accordionSection name="E" label="Task Disposition" class="example-accordion">
                            <c:DynamicRecordEditForm TaskId="{!v.recordId}" PADID="{!v.PADID}" taskRec="{!v.TaskObject}"></c:DynamicRecordEditForm>
                        </lightning:accordionSection>
                    </aura:if--> 
                    <!--Additional Information-->
                     <!--aura:if isTrue="{!v.CurrentUserEdit}"-->
                        <!--aura:if isTrue="{!v.ErrorMessageInMarkCompleteed}">
                            
                            <section aria-describedby="dialog-body-id-30" aria-labelledby="dialog-heading-id-1" class="slds-popover slds-popover_error slds-nubbin_bottom-left" role="dialog">
                                <header class="slds-popover__header">
                                    <div class="slds-media slds-media_center slds-has-flexi-truncate ">
                                        <div class="slds-media__figure">
                                            <span class="slds-icon_container slds-icon-utility-error">
                                                
                                            </span>
                                        </div>
                                        <div class="slds-media__body">
                                            <h2 class="slds-truncate slds-text-heading_medium" id="dialog-heading-id-1" title="We hit a snag.">We hit a snag.</h2>
                                        </div>
                                    </div>
                                </header>
                                <div class="slds-popover__body" id="dialog-body-id-110">
                                    <ul class="slds-list_dotted">
                                        <li>Upload a Document</li>
                                    </ul>
                                </div>
                            </section>
                        </aura:if-->
                        <!--lightning:accordionSection name="B" label="Additional Information" class="example-accordion"-->
                            <aura:if isTrue="{!AND(v.IsParentTaskId==true,v.IsTaskReviewerNameExist==true)}"> 
                                <!--lightning:accordionSection name="E" label="Task Disposition" class="example-accordion"-->
                                <!--c:DynamicRecordEditForm TaskId="{!v.recordId}" PADID="{!v.PADID}" taskRec="{!v.TaskObject}"></c:DynamicRecordEditForm-->
                                <!--/lightning:accordionSection-->
                            </aura:if> 
                            <!--div class="slds-m-top_medium" style="border-left: 1px solid rgb(221, 219, 218);  
                                                                  border-right: 1px solid rgb(221, 219, 218);  
                                                                  border-bottom: 1px solid rgb(221, 219, 218);  
                                                                  border-top: 1px solid rgb(221, 219, 218);"> 
                                <div class="slds-page-header" style="border-radius: 0px; border-right: 0px;border-left: 0px;border-top: 0px;  
                                                                     box-shadow: 0 0px 0px 0 rgba(0, 0, 0, 0.1);">  
                                    &nbsp;Files  
                                </div>  
                                 <div class="slds-grid">&nbsp; &nbsp;&nbsp;&nbsp;
                                     <div class="slds-col slds-size-5-of-12 slds-p-bottom_small">  
                                         <lightning:select name="DocumentCategory" label="Document Category">
                                             <option value="">-None-</option>
                                             <option value="1">Compliance Document</option>
                                             <option value="2">Account-DO Document</option>
                                             <option value="3">Business Team - DO   Document</option>
                                             <option value="3">NPOS Tech Team   Document</option>
                                             <option value="3">Operations - DO   Document</option>
                                             <option value="3">Operations - DO Bureau   Document</option>
                                             <option value="3">Legal Team   Document</option>
                                             
                                         </lightning:select>
                                     </div>&nbsp; &nbsp;&nbsp; &nbsp;
                                     <div class="slds-col slds-size-5-of-12 slds-p-bottom_small"> 
                                         <lightning:input type="text" name="Document_Name" label="Document Name" aura:id="DocumentName" value="{!v.fileDescription}" onchange="{!c.DocumentName}"/>
                                     </div>&nbsp; &nbsp;&nbsp; &nbsp;
                                </div>
                                <div class="slds-grid">&nbsp; &nbsp;&nbsp;&nbsp;  
                                    <div class="slds-col slds-size-5-of-12 slds-p-bottom_small">  
                                        <lightning:input type="text" name="input1" label="Document Description" aura:id="fileName" value="{!v.fileDescription}" onchange="{!c.Description}"/>  
                                    </div>&nbsp; &nbsp;&nbsp; &nbsp;  
                                    <div class="slds-col slds-size-5-of-12 slds-p-bottom_small">  
                                        <lightning:fileUpload label="" multiple="{!v.multiple}"   
                                                              accept="{!v.accept}" recordId="{!v.recordId}"   
                                                              onuploadfinished="{!c.UploadFinished}" />  
                                    </div>&nbsp; &nbsp;&nbsp; &nbsp;
                                    <div class="slds-col slds-size-of-12"> 
                                    </div>
                                </div>
                            </div-->
                        <!--/lightning:accordionSection-->
                    <!--/aura:if-->
                    <!--Documents-->
                    <lightning:accordionSection name="C" label="Documents" class="example-accordion">
                        <aura:if isTrue="{!v.CurrentUserEdit}">
                            <aura:if isTrue="{!v.ErrorMessageInMarkCompleteed}">
                                <!--lightning:textarea name="input1" label="Comment" required="true" value="{!v.CommentValue}"/-->
                                <section aria-describedby="dialog-body-id-30" aria-labelledby="dialog-heading-id-1" class="slds-popover slds-popover_error slds-nubbin_bottom-left" role="dialog">
                                    <header class="slds-popover__header">
                                        <div class="slds-media slds-media_center slds-has-flexi-truncate ">
                                            <div class="slds-media__figure">
                                                <span class="slds-icon_container slds-icon-utility-error">
                                                    
                                                </span>
                                            </div>
                                            <div class="slds-media__body">
                                                <h2 class="slds-truncate slds-text-heading_medium" id="dialog-heading-id-1" title="We hit a snag.">We hit a snag.</h2>
                                            </div>
                                        </div>
                                    </header>
                                    <div class="slds-popover__body" id="dialog-body-id-110">
                                        <ul class="slds-list_dotted">
                                            <li>Upload a Document</li>
                                        </ul>
                                    </div>
                                </section>
                            </aura:if>
                              <div class="slds-m-top_medium" style="border-left: 1px solid rgb(221, 219, 218);  
                                                                  border-right: 1px solid rgb(221, 219, 218);  
                                                                  border-bottom: 1px solid rgb(221, 219, 218);  
                                                                  border-top: 1px solid rgb(221, 219, 218);"> 
                                <div class="slds-page-header" style="border-radius: 0px; border-right: 0px;border-left: 0px;border-top: 0px;  
                                                                     box-shadow: 0 0px 0px 0 rgba(0, 0, 0, 0.1);">  
                                    &nbsp;Files  
                                </div>  
                                  <div class="slds-grid">&nbsp; &nbsp;&nbsp;&nbsp;
                                      <div class="slds-col slds-size--5-of-12 slds-p-bottom_small">  
                                          <lightning:select name="DocumentCategory" label="Document Category">
                                              <option value="">--None--</option>
                                              <option value="1">Compliance Document</option>
                                              <option value="2">Account-DO Document</option>
                                              <option value="3">Business Team - DO   Document</option>
                                              <option value="3">NPOS Tech Team   Document</option>
                                              <option value="3">Operations - DO   Document</option>
                                              <option value="3">Operations - DO Bureau   Document</option>
                                              <option value="3">Legal Team   Document</option>
                                              
                                          </lightning:select>
                                      </div>&nbsp; &nbsp;&nbsp; &nbsp;
                                      <div class="slds-col slds-size--5-of-12 slds-p-bottom_small"> 
                                          <lightning:input type="text" name="Document_Name" label="Document Name" aura:id="DocumentName" value="{!v.fileDescription}" onchange="{!c.DocumentName}"/>
                                      </div>&nbsp; &nbsp;&nbsp; &nbsp;
                                  </div>
                                  <div class="slds-grid">&nbsp; &nbsp;&nbsp;&nbsp;  
                                      <div class="slds-col slds-size--5-of-12 slds-p-bottom_small">  
                                          <lightning:input type="text" name="input1" label="Document Description" aura:id="fileName" value="{!v.fileDescription}" onchange="{!c.Description}"/>  
                                      </div>&nbsp; &nbsp;&nbsp; &nbsp;  
                                      <div class="slds-col slds-size--5-of-12 slds-p-bottom_small">  
                                          <lightning:fileUpload label="" multiple="{!v.multiple}"   
                                                                accept="{!v.accept}" recordId="{!v.recordId}"   
                                                                onuploadfinished="{!c.UploadFinished}" />  
                                      </div>&nbsp; &nbsp;&nbsp; &nbsp;
                                      <div class="slds-col slds-size---of-12"> 
                                      </div>
                                  </div>
                            </div>
                        </aura:if>
                        <lightning:card>
                            <table class="slds-table slds-table--bordered slds-m-top_medium">  
                                <thead>  
                                    <tr>  
                                        <th>Title</th>  
                                        <th>FileType</th>  
                                        <th>Description</th>
                                        <th>Created Date</th>
                                    </tr>  
                                </thead>  
                                <tbody>  
                                    <aura:iteration items="{!v.files}" var="f">  
                                        <tr>  
                                            <td> <a href="" id="{!f.Id}" onclick="{!c.OpenFile}">{!f.Title}</a></td>  
                                            <td>{!f.FileType}</td>  
                                            <td>{!f.Description}</td>
                                            <td><lightning:formattedDateTime value="{!f.CreatedDate}"/></td>
                                        </tr>  
                                    </aura:iteration>  
                                </tbody>  
                            </table> 
                        </lightning:card>
                    </lightning:accordionSection>
                    <!--Reviewer Details-->
                    <aura:if isTrue="{!v.CurrentUserEdit}">
                        <aura:if isTrue="{!AND(v.IsParentTaskId==true,v.IsTaskReviewerNameExist==true)}"> 
                            <lightning:accordionSection name="D" label="Reviewer Details" class="example-accordion">
                                <div class="card slds-m-top_medium" style="box-shadow: 0 3px 6px 0 rgba(0,0,0,0.2);transition: 0.5s;width:100%;justify-content: center;">
                                    
                                    <lightning:button label="Add Reviewer" onclick="{!c.addNewRow}" iconName="utility:add" variant="brand" class="slds-float_right"/>
                                    <br></br>
                                    <br></br>
                                    <aura:if isTrue="{!v.data.length!=0}">
                                        <table class="slds-table slds-table_cell-buffer slds-no-row-hover slds-table_bordered">
                                            <thead>
                                                <tr class="slds-line-height_reset">
                                                    <th class="" scope="col">
                                                        <div class="slds-truncate" title="Select">Type</div>
                                                    </th>
                                                    <th class="" scope="col">
                                                        <div class="slds-truncate" title="Owner Name">User/Queue</div>
                                                    </th>
                                                    <th class="" scope="col">
                                                        <div class="slds-truncate" title="Status">Action</div>
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <aura:iteration items="{!v.data}" var="row" indexVar="index">
                                                    <tr class="slds-hint-parent">
                                                        <td style="padding:5px;align-items: center;">
                                                            <aura:if isTrue="{!row.disabled}"> 
                                                                <lightning:select name="{!index}" value="{!row.type}" onchange="{!c.updateOptions}" disabled="true">
                                                                    <aura:iteration items="{!v.types}" var="type" >
                                                                        <option value="{!type}">{!type}</option>
                                                                    </aura:iteration>
                                                                </lightning:select>
                                                                <aura:set attribute="else">
                                                                    <lightning:select name="{!index}" value="{!row.type}" onchange="{!c.updateOptions}">
                                                                        <aura:iteration items="{!v.types}" var="type" >
                                                                            <option value="{!type}">{!type}</option>
                                                                        </aura:iteration>
                                                                    </lightning:select>
                                                                </aura:set>
                                                            </aura:if>
                                                        </td>
                                                        <td style="padding:5px;align-items: center;">
                                                            <aura:if isTrue="{!row.disabled}" >
                                                                <lightning:select name="{!index}" value="{!row.userOrQueue}" onchange="{!c.updateUserSelection}" disabled="true">
                                                                    <aura:iteration items="{!row.userOrQueueOptions}" var="option">
                                                                        <option value="{!option.id}">{!option.name}</option>
                                                                    </aura:iteration>
                                                                </lightning:select>
                                                                <aura:set attribute="else">
                                                                    <aura:if isTrue="{!AND(row.selectedUserOrQueueId!=null,row.selectedUserOrQueueId!=undefined)}" >
                                                                        <lightning:select name="{!index}" value="{!row.userOrQueue}" onchange="{!c.updateUserSelection}">
                                                                            <aura:iteration items="{!row.userOrQueueOptions}" var="option">
                                                                                <option value="{!option.id}">{!option.name}</option>
                                                                            </aura:iteration>
                                                                        </lightning:select>
                                                                        <aura:set attribute="else">
                                                                            <lightning:select name="{!index}" value="{!row.userOrQueue}" onchange="{!c.updateUserSelection}">
                                                                                <option value=" ">--None--</option>
                                                                                <aura:iteration items="{!row.userOrQueueOptions}" var="option">
                                                                                    <option value="{!option.id}">{!option.name}</option>
                                                                                </aura:iteration>
                                                                            </lightning:select>
                                                                        </aura:set>
                                                                    </aura:if> 
                                                                </aura:set>
                                                            </aura:if>                  
                                                        </td>
                                                        <td style="padding:5px;align-items: center;">
                                                            <br></br>
                                                            <aura:if isTrue="{!row.disabled}">
                                                                <lightning:button label="Delete" onclick="{!c.deleteRow}" value="{!index}" variant="destructive" disabled="true"/>
                                                                <aura:set attribute="else">
                                                                    <lightning:button label="Delete" onclick="{!c.deleteRow}" value="{!index}" variant="destructive"/>
                                                                </aura:set>
                                                            </aura:if>
                                                        </td>
                                                    </tr>
                                                </aura:iteration>
                                            </tbody>
                                        </table>
                                        <br></br>
                                        <aura:if isTrue="{!v.HandleResubmittedDisable}">
                                            <lightning:button label="Submit For Review" onclick="{!c.handleClickSave}"  class="slds-align_absolute-center slds-m-bottom_small" variant="brand" disabled="true"/>
                                            <aura:set attribute="else">
                                                <lightning:button label="Submit For Review" onclick="{!c.handleClickSave}"  class="slds-align_absolute-center slds-m-bottom_small" variant="brand" disabled="false"/>
                                            </aura:set>
                                        </aura:if>
                                        <br></br>
                                    </aura:if>
                                </div>
                                <br></br>
                                <aura:if isTrue="{!v.ChildTaskOwnerName.length!=0}"> 
                                    <div class="card" style="box-shadow: 0 3px 6px 0 rgba(0,0,0,0.2);transition: 0.5s;width:100%;justify-content: center;">
                                        <table class="slds-table slds-table_cell-buffer slds-table_bordered slds-table_col-bordered">
                                            <thead>
                                                <tr class="slds-line-height_reset">
                                                    <th class="" scope="col">
                                                        <div class="slds-truncate" title="Select">Select</div>
                                                    </th>
                                                    <th class="" scope="col">
                                                        <div class="slds-truncate" title="Owner Name">Owner Name</div>
                                                    </th>
                                                    <th class="" scope="col">
                                                        <div class="slds-truncate" title="Status">Status</div>
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <aura:iteration items="{!v.ChildTaskOwnerName}" var="ind" >
                                                    <tr class="slds-hint-parent">
                                                        <td data-label="Select" style="{!ind.RowBackgroundColor}">
                                                            <aura:if isTrue="{!ind.disableCheckbox}">
                                                                <label class="slds-checkbox">
                                                                    <ui:inputCheckbox aura:id="checkContact" value="{!ind.Selected}" text="{!ind.Id}" change="{!c.selectSingleOptionRec}" disabled="true"/>
                                                                    <span class="slds-checkbox--faux" />
                                                                    <span class="slds-form-element__label"></span>
                                                                </label>
                                                                <aura:set attribute="else">
                                                                    <label class="slds-checkbox">
                                                                        <ui:inputCheckbox aura:id="checkContact" value="{!ind.Selected}" text="{!ind.Id}" change="{!c.selectSingleOptionRec}" />
                                                                        <span class="slds-checkbox--faux" />
                                                                        <span class="slds-form-element__label"></span>
                                                                    </label>
                                                                </aura:set>
                                                            </aura:if>
                                                        </td>
                                                        <td data-label="Owner Name" style="{!ind.RowBackgroundColor}">
                                                            <div class="slds-truncate" title="{!ind.Owner.Name}">{!ind.Owner.Name}</div>
                                                        </td>
                                                        <td data-label="Status" style="{!ind.RowBackgroundColor}">
                                                            <div class="slds-truncate" title="{!ind.Status}">{!ind.Status}</div>
                                                        </td>
                                                    </tr>
                                                </aura:iteration>
                                            </tbody>
                                        </table>
                                        <footer class="slds-card__footer">
                                            <aura:if isTrue="{!v.HandleResubmittedDisable}">
                                                <lightning:button label="Resubmitted" onclick="{!c.handleResubmitted}"  variant="brand" class="slds-align_absolute-center slds-m-bottom_small" disabled="true"/>
                                                <aura:set attribute="else">
                                                    <lightning:button label="Resubmitted" onclick="{!c.handleResubmitted}"  variant="brand" class="slds-align_absolute-center slds-m-bottom_small" disabled="false"/>
                                                </aura:set>
                                            </aura:if>
                                        </footer>
                                    </div> 
                                </aura:if>
                            </lightning:accordionSection>
                            <aura:set attribute="else">
                                <aura:if isTrue="{!v.CurrentUserEdit}">
                                    <aura:if isTrue="{!v.IsParentTaskId==false}"> 
                                        <lightning:accordionSection name="E" label="Reviewer Section" class="example-accordion">
                                            <aura:if isTrue="{!v.ShowCommentBox}">
                                                
                                                <section aria-describedby="dialog-body-id-30" aria-labelledby="dialog-heading-id-1" class="slds-popover slds-popover_error slds-nubbin_bottom-left" role="dialog">
                                                    <header class="slds-popover__header">
                                                        <div class="slds-media slds-media_center slds-has-flexi-truncate ">
                                                            <div class="slds-media__figure">
                                                                <span class="slds-icon_container slds-icon-utility-error">
                                                                    <!--svg class="slds-icon slds-icon_x-small" aria-hidden="true">
                                    <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#error"></use>
                                </svg-->
                                                                </span>
                                                            </div>
                                                            <div class="slds-media__body">
                                                                <h2 class="slds-truncate slds-text-heading_medium" id="dialog-heading-id-1" title="We hit a snag.">We hit a snag.</h2>
                                                            </div>
                                                        </div>
                                                    </header>
                                                    <div class="slds-popover__body" id="dialog-body-id-110">
                                                        <ul class="slds-list_dotted">
                                                            <li>Reviewer Comment Is Mandatory</li>
                                                        </ul>
                                                    </div>
                                                </section>
                                            </aura:if>
                                            <lightning:textarea name="input1" label="Reviewer Comment" required="true" value="{!v.CommentValue}"/>
                                            <br></br>
                                        </lightning:accordionSection>
                                    </aura:if>
                                </aura:if>
                            </aura:set>
                        </aura:if>
                    </aura:if>   
                </lightning:accordion>
            </div>
            <div class="slds-col slds-size_4-of-12">
                <br></br>
                <!--Task Detail-->
                <div style="border-left: 1px solid rgb(221, 219, 218);  
                            border-right: 1px solid rgb(221, 219, 218);  
                            border-bottom: 1px solid rgb(221, 219, 218);  
                            border-top: 1px solid rgb(221, 219, 218);height:300px;">
                    <div class="slds-page-header" style="border-radius: 0px; border-right: 0px;border-left: 0px;border-top: 0px;  
                                                         box-shadow: 0 0px 0px 0 rgba(0, 0, 0, 0.1);background-color:#dadada;">  
                        &nbsp;<b>Task Details</b>  
                    </div> 
                    <div class="slds-grid slds-wrap slds-p-left_small">
                        <div class="slds-size_1-of-4 slds-p-bottom_medium slds-p-top_medium">
                            <span><b>Subject</b></span>
                        </div>
                        <div class="slds-size_3-of-4 slds-p-top_medium" >
                            <span style="overflow-wrap: break-word;">: {!v.TaskObject.Subject}</span>
                        </div>
                        
                        <div class="slds-size_1-of-4 slds-p-bottom_medium">
                            <span><b>Due Date</b></span>
                        </div>
                        <div class="slds-size_3-of-4">
                            <span>: {!v.TaskObject.ActivityDate}</span>
                        </div>
                        <br></br>
                        <div class="slds-size_1-of-4 slds-p-bottom_medium">
                            <span><b>Submitted By</b></span>
                        </div>
                        <div class="slds-size_3-of-4">
                            <span>: {!v.UserRec.Name}</span>
                        </div>
                        <br></br>
                        <div class="slds-size_1-of-4 slds-p-bottom_medium">
                            <span><b>Reviewed By</b></span>
                        </div>
                        <div class="slds-size_3-of-4">
                            <span>: {!v.TaskObject.UserId__r.Name}</span>
                        </div>
                        <br></br>
                        <div class="slds-size_1-of-4 slds-p-bottom_medium">
                            <span><b>Status</b></span>
                        </div>
                        <div class="slds-size_3-of-4 slds-p-bottom_medium">
                            <span>: {!v.TaskObject.Status}</span>
                        </div>
                        <br></br>
                        <div class="slds-size_1-of-4 slds-p-bottom_medium">
                            <span><b>Comments</b></span>
                        </div>
                        <div class="slds-size_3-of-4">
                            <span>: {!v.TaskObject.Description}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <aura:if isTrue="{!v.CurrentUserEdit}">
            <div class="modal-footer slds-modal__footer slds-size_1-of-1">
                <aura:if isTrue="{!v.IsParentTaskId == true}">
                    <div class="slds-align_absolute-center">
                        <aura:if isTrue="{!AND(v.TaskReviewerType==null,v.TaskReviewerType==undefined)}">
                            <lightning:button variant="brand" onclick="{!c.updateTask}"  label="Mark Completed"  ></lightning:button>
                            <lightning:button onclick="{!c.handleCancel}" variant="Destructive"  label="Cancel"></lightning:button>
                            <aura:set attribute="else">
                                <lightning:button onclick="{!c.handleCancel}" variant="Destructive"  label="Cancel"></lightning:button>
                            </aura:set> 
                        </aura:if>
                    </div> 
                </aura:if>
                
                <aura:if isTrue="{!v.IsParentTaskId == false}">
                    <div class="slds-align_absolute-center">
                        <lightning:button variant="brand"   onclick="{!c.handleClickApprove}">Approved</lightning:button>
                        <lightning:button variant="destructive"   onclick="{!c.handleClickReject}">Rejected</lightning:button>
                        <lightning:button variant="success"  onclick="{!c.handleClickReAssign}">Re-Assign</lightning:button>
                        <lightning:button onclick="{!c.handleCancel}" variant="Destructive"  label="Cancel"></lightning:button>
                    </div>
                </aura:if>
            </div>
        </aura:if>
    </div>
    <!-- /lightning:card -->
</aura:component>